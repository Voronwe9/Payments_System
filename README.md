


# üí∞ Payments System ‚Äî Django Webhook Service

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π backend-—Å–µ—Ä–≤–∏—Å –Ω–∞ Django, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤—Ö–æ–¥—è—â–∏–µ –≤–µ–±—Ö—É–∫–∏ –æ—Ç –±–∞–Ω–∫–∞ –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –±–∞–ª–∞–Ω—Å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π.

## üìå –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- –ü—Ä–∏—ë–º –≤–µ–±—Ö—É–∫–æ–≤ —á–µ—Ä–µ–∑ `POST /api/webhook/bank/`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ `operation_id`
- –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ —Å—É–º–º—ã –Ω–∞ –±–∞–ª–∞–Ω—Å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ `payer_inn`
- –•—Ä–∞–Ω–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π –∏ –ª–æ–≥–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–∫—É—â–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞ –ø–æ –ò–ù–ù: `GET /api/organizations/<inn>/balance/`
- Swagger –∏ ReDoc –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API



## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
   ```bash
   git clone <your-repo-url>
   cd payments_system


2. **–°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**

   ```bash
   python3 -m venv venv
   source venv/bin/activate
   pip install -r requirements.txt
   ```

3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (MySQL)**

   *–£–±–µ–¥–∏—Å—å, —á—Ç–æ –≤ `settings.py` –ø—Ä–æ–ø–∏—Å–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ(–≤ –ø—Ä–∏–º–µ—Ä–µ —É–∫–∞–∑–∞–Ω—ã –Ω–µ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)*:

   ```python
   DATABASES = {
       'default': {
           'ENGINE': 'django.db.backends.mysql',
           'NAME': 'payments_db',
           'USER': 'USER',
           'PASSWORD': 'PASSWORD',
           'HOST': 'localhost',
           'PORT': '3306',
       }
   }
   ```

4. **–í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏**

   ```bash
   python manage.py makemigrations
   python manage.py migrate
   ```

5. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä**

   ```bash
   python manage.py runserver
   ```

---

## üß™ Swagger –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

Swagger UI –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:

```
http://127.0.0.1:8000/swagger/
```

ReDoc (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ Swagger):

```
http://127.0.0.1:8000/redoc/
```

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ `/api/webhook/bank/`:

```json
{
  "operation_id": "ccf0a86d-041b-4991-bcf7-e2352f7b8a4a",
  "amount": "145000.12",
  "payer_inn": "1234567890",
  "document_number": "PAY-328",
  "document_date": "2024-04-27T21:00:00Z"
}
```

–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –¥—É–±–ª–∏–∫–∞—Ç:

```json
{
  "detail": "Payment already exists"
}
```

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

* `payments/` ‚Äî –ª–æ–≥–∏–∫–∞ –ø—Ä–∏—ë–º–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π
* `organizations/` ‚Äî –º–æ–¥–µ–ª—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π –∏ –±–∞–ª–∞–Ω—Å
* `api/` ‚Äî urls, views, serializers
* `drf_yasg` ‚Äî –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

---

## üë®‚Äçüíª –ê–≤—Ç–æ—Ä

–ê–Ω—Ç–æ–Ω –ë–∞—Ä—ã–Ω–∏–Ω
üìß [anton.barynin.dev@gmail.com](mailto:anton.barynin.dev@gmail.com)
üì± +7 916 070-77-70
üí¨ Telegram: [@Voron9gg](https://t.me/Voron9gg)
üíº GitHub: [Voronwe9](https://github.com/Voronwe9)

---


